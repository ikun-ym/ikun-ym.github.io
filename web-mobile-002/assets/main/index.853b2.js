System.register("chunks:///_virtual/all.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"d7fe7znaDxFbaZdMPLa96xT","all",void 0),t("All",function(){function t(){}return t.setStateDialog=function(e){t.isDialogActive=e},t}()).isDialogActive=!1,e._RF.pop()}}}));

System.register("chunks:///_virtual/Audio.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var i,o,t,n,u,r,l,a,c,s;return{setters:[function(e){i=e.applyDecoratedDescriptor,o=e.inheritsLoose,t=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){u=e.cclegacy,r=e._decorator,l=e.AudioSource,a=e.AudioClip,c=e.resources,s=e.Component}],execute:function(){var p,h,d,y,f,v,S,b,m,g,w,z,C,O,A,D,F,M;u._RF.push({},"cbf9fu+LHhFp7vGM+G5BuQF","Audio",void 0);var _=r.ccclass,E=r.property;e("Audio",(p=_("Audio"),h=E({type:l}),d=E({type:a}),y=E({type:a}),f=E({type:a}),v=E({type:a}),S=E({type:a}),b=E({type:a}),p(((M=function(e){function i(){for(var i,o=arguments.length,u=new Array(o),r=0;r<o;r++)u[r]=arguments[r];return i=e.call.apply(e,[this].concat(u))||this,t(i,"audioSource",w,n(i)),t(i,"dlive",z,n(i)),t(i,"gameover",C,n(i)),t(i,"coll",O,n(i)),t(i,"clic",A,n(i)),t(i,"lover",D,n(i)),t(i,"lvic",F,n(i)),i.soundCache=new Map,i.isSoundEnabled=!0,i.isMusicEnabled=!0,i}o(i,e),i.getInstance=function(){return this.instance};var u=i.prototype;return u.start=function(){i.instance=this},u.playSound=function(e){var i=this;this.isSoundEnabled&&this.audioSource&&(this.soundCache.has(e)?this.audioSource.playOneShot(this.soundCache.get(e)):c.load(e,a,(function(o,t){o?console.error("音效加载失败: "+e,o):(i.soundCache.set(e,t),i.audioSource.playOneShot(t))})))},u.playDlive=function(){this.audioSource.volume=.3,this.audioSource.playOneShot(this.dlive)},u.playGameover=function(){this.audioSource.volume=.3,this.audioSource.playOneShot(this.gameover)},u.playCollider=function(){this.audioSource.volume=.3,this.audioSource.playOneShot(this.coll)},u.playClick=function(){this.audioSource.volume=.3,this.audioSource.playOneShot(this.clic)},u.playlevelover=function(){this.audioSource.volume=.3,this.audioSource.playOneShot(this.lover)},u.playlevelvic=function(){this.audioSource.volume=.3,this.audioSource.playOneShot(this.lvic)},i}(s)).instance=void 0,w=i((g=M).prototype,"audioSource",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=i(g.prototype,"dlive",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=i(g.prototype,"gameover",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=i(g.prototype,"coll",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=i(g.prototype,"clic",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=i(g.prototype,"lover",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=i(g.prototype,"lvic",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=g))||m));u._RF.pop()}}}));

System.register("chunks:///_virtual/AudioMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var i,u,e,t,n,c,r;return{setters:[function(o){i=o.createClass},function(o){u=o.cclegacy,e=o.AudioClip,t=o.resources,n=o.Node,c=o.director,r=o.AudioSource}],execute:function(){u._RF.push({},"5d3dcJTphlAVYUl3EBYryus","AudioMgr",void 0),o("AudioMgr",function(){function o(){this._audioSource=void 0;var o=new n;o.name="__audioMgr__",c.getScene().addChild(o),c.addPersistRootNode(o),this._audioSource=o.addComponent(r)}var u=o.prototype;return u.playOneShot=function(o,i){var u=this;void 0===i&&(i=.1),o instanceof e?this._audioSource.playOneShot(o,i):t.load(o,(function(o,e){o?console.log(o):u._audioSource.playOneShot(e,i)}))},u.play=function(o,i){var u=this;void 0===i&&(i=.1),o instanceof e?(this._audioSource.stop(),this._audioSource.clip=o,this._audioSource.loop=!0,this._audioSource.play(),this.audioSource.volume=i):t.load(o,(function(o,e){o?console.log(o):(u._audioSource.stop(),u._audioSource.clip=e,u._audioSource.play(),u.audioSource.volume=i)}))},u.stop=function(){this._audioSource.stop()},u.pause=function(){this._audioSource.pause()},u.resume=function(){this._audioSource.play()},i(o,[{key:"audioSource",get:function(){return this._audioSource}}],[{key:"inst",get:function(){return null==this._inst&&(this._inst=new o),this._inst}}]),o}())._inst=void 0,u._RF.pop()}}}));

System.register("chunks:///_virtual/BackgroundScroll.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var o,n,r,e,i,a,c,s,u,h;return{setters:[function(t){o=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.initializerDefineProperty,e=t.assertThisInitialized},function(t){i=t.cclegacy,a=t._decorator,c=t.Node,s=t.Vec2,u=t.UITransform,h=t.Component}],execute:function(){var l,g,d,p,y;i._RF.push({},"24021bmixhA5onVRm8uEYnu","BackgroundScroll",void 0);var f=a.ccclass,k=a.property;t("BackgroundScroll",(l=f("BackgroundScroll"),g=k(c),l((y=o((p=function(t){function o(){for(var o,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return o=t.call.apply(t,[this].concat(i))||this,r(o,"background",y,e(o)),o.startTouchPos=new s,o.startBackgroundPos=new s,o}n(o,t);var i=o.prototype;return i.onLoad=function(){this.node.on(c.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(c.EventType.TOUCH_MOVE,this.onTouchMove,this)},i.onTouchStart=function(t){if(this.startTouchPos=t.getUILocation(),this.background){var o=this.background.position;this.startBackgroundPos.set(o.x,o.y)}},i.onTouchMove=function(t){if(this.background){var o=t.getUILocation().subtract(this.startTouchPos),n=new s(this.startBackgroundPos.x,this.startBackgroundPos.y+o.y),r=this.background.getComponent(u).height,e=this.node.getComponent(u).height,i=-(r/2-e/2),a=r/2-e/2;n.y=Math.max(i,Math.min(a,n.y)),this.background.setPosition(n.x,n.y)}},o}(h)).prototype,"background",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=p))||d));i._RF.pop()}}}));

System.register("chunks:///_virtual/BGM.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioMgr.ts"],(function(t){var i,r,e,n,o,c,u,a,s;return{setters:[function(t){i=t.applyDecoratedDescriptor,r=t.inheritsLoose,e=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,c=t._decorator,u=t.AudioClip,a=t.Component},function(t){s=t.AudioMgr}],execute:function(){var l,p,f,y,M;o._RF.push({},"4bccf2GZ9JKN6mlvMMtR2dQ","BGM",void 0);var d=c.ccclass,g=c.property;t("BGM",(l=d("BGM"),p=g(u),l((M=i((y=function(t){function i(){for(var i,r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return i=t.call.apply(t,[this].concat(o))||this,e(i,"bgMusic",M,n(i)),i.state_play=!1,i}r(i,t);var o=i.prototype;return o.start=function(){s.inst.audioSource.playing||s.inst.play(this.bgMusic)},o.update=function(t){},i}(a)).prototype,"bgMusic",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=y))||f));o._RF.pop()}}}));

System.register("chunks:///_virtual/BottomAdController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./cufbParent.ts"],(function(t){var e,o,n,i,r,u,p,a,l,c,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,u=t._decorator,p=t.Node,a=t.Button,l=t.director,c=t.Component},function(t){s=t.cufbParent}],execute:function(){var d,f,h,y,A,B,b,v,m;r._RF.push({},"ef645UHjLJJB6PEyuHit0RW","BottomAdController",void 0);var g=u.ccclass,C=u.property;t("BottomAdController",(d=g("BottomAdController"),f=C(p),h=C(p),y=C(p),d((b=e((B=function(t){function e(){for(var e,o=arguments.length,r=new Array(o),u=0;u<o;u++)r[u]=arguments[u];return e=t.call.apply(t,[this].concat(r))||this,n(e,"adButton",b,i(e)),n(e,"popupAd",v,i(e)),n(e,"exitButton",m,i(e)),e}o(e,t);var r=e.prototype;return r.onLoad=function(){this.popupAd.active=!1,this.adButton.on(a.EventType.CLICK,this.showPopupAd,this),this.exitButton.on(a.EventType.CLICK,this.hidePopupAd,this)},r.showPopupAd=function(){l.pause(),s.getInstance().changeBState(),this.popupAd.active=!0},r.hidePopupAd=function(){l.resume(),this.popupAd.active=!1},e}(c)).prototype,"adButton",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(B.prototype,"popupAd",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=e(B.prototype,"exitButton",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=B))||A));r._RF.pop()}}}));

System.register("chunks:///_virtual/clickstartgame.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MapPanel.ts","./StartUI.ts"],(function(t){var e,c,n,a,i,o,r;return{setters:[function(t){e=t.inheritsLoose},function(t){c=t.cclegacy,n=t._decorator,a=t.director,i=t.Component},function(t){o=t.MapPanel},function(t){r=t.StartUI}],execute:function(){var s;c._RF.push({},"160aawNaFJAZbksHEr5j6jM","clickstartgame",void 0);var l=n.ccclass;n.property,t("clickstartgame",l("clickstartgame")(s=function(t){function c(){return t.apply(this,arguments)||this}e(c,t);var n=c.prototype;return n.clickstartgame=function(){setTimeout((function(){a.loadScene("loading")}),500)},n.clickcancelgame=function(){o.getInstance().hideleveldialog()},n.clickcancelspeed=function(){r.getInstance().hidespeeddialog()},n.clickStartspeed=function(){r.getInstance().OnStartButtonClick()},c}(i))||s);c._RF.pop()}}}));

System.register("chunks:///_virtual/cufbParent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./liveUI.ts","./GameManager.ts","./Audio.ts","./prefab.ts","./skin.ts"],(function(t){var e,i,r,n,a,o,s,l,u,c,h,f,d,g,p,v,y,w,m,A;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized,a=t.createForOfIteratorHelperLoose},function(t){o=t.cclegacy,s=t._decorator,l=t.Prefab,u=t.instantiate,c=t.tween,h=t.Vec3,f=t.input,d=t.Input,g=t.find,p=t.Component},function(t){v=t.liveUI},function(t){y=t.GameManager},function(t){w=t.Audio},function(t){m=t.default},function(t){A=t.default}],execute:function(){var b,x,z,M,S,I,k,T,P,R,_,N,D,E,C,q,F,U,B;o._RF.push({},"e6161HqfqNHPY4Kgv1qlZpJ","cufbParent",void 0);var O=s.ccclass,L=s.property,H=function(t){return t[t.Red=0]="Red",t[t.Yellow=1]="Yellow",t[t.purple=2]="purple",t[t.while=3]="while",t}(H||{});t("cufbParent",(b=O("cufbParent"),x=L(l),z=L(l),M=L(l),S=L(l),I=L(v),k=L(l),T=L(l),b(((B=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))||this).currentRound=void 0,r(e,"blockSize",_,n(e)),r(e,"c1",N,n(e)),r(e,"c2",D,n(e)),r(e,"c3",E,n(e)),r(e,"c4",C,n(e)),e.tileMatrix=[],e.colorArray=[],e.isMoving=!1,e.size=void 0,e.rotateState=!1,e.movesysmol=void 0,e.state_button=!0,e.cstate=!1,r(e,"liveui",q,n(e)),e.dstate=!1,e.indexArray=[],e.posArray=[],e.pArray=[],e.titleMatrix_pos=[],e.rewardNode=null,e.reward_time=!1,r(e,"reward1",F,n(e)),r(e,"reward2",U,n(e)),e.spriteFramePath=A,e.prefabPaths=m,e.len=null,e.nullstate=!1,e.childangle=null,e.animatedNodes=new Set,e.ybnum=0,e.touchStartPos=void 0,e.currentTween=null,e}i(e,t),e.getInstance=function(){return this.instance};var o=e.prototype;return o.start=function(){console.log("1"),this.currentRound=1,this.startNewRound()},o.findCoordinates=function(t){for(var e=0;e<this.tileMatrix.length;e++)for(var i=0;i<this.tileMatrix[e].length;i++)if(this.tileMatrix[e][i]===t)return{x:e,y:i}},o.PArray=function(){for(var t=0;t<this.size;t++)for(var e=0;e<this.size;e++)this.pArray.push(this.tileMatrix[t][e]),this.posArray.push(this.titleMatrix_pos[t][e])},o.upPArray=function(){this.pArray=[],this.posArray=[],this.indexArray=[]},o.getRandomIndex=function(t){var e;do{e=Math.floor(Math.random()*this.size*this.size)}while(!t.includes(e));return e},o.createreward=function(){var t=null;switch(Math.floor(2*Math.random())){case 0:t=this.reward2;break;case 1:t=this.reward1}return t},o.f=function(){console.log("触发了f");var t=this.getRandomIndex(this.indexArray);this.PArray();var e=this.pArray[t],i=this.findCoordinates(e),r=this.posArray[t];this.rewardNode=u(this.createreward()),this.node.addChild(this.rewardNode);for(var n,o=this.node.children,s=a(o);!(n=s()).done;){var l=n.value;this.childangle=l.angle;break}this.rewardNode.angle=this.childangle,this.rewardNode.setPosition(r),this.reward_time=!0,this.tileMatrix[i.x][i.y]=this.rewardNode,this.colorArray[i.x][i.y]=4},o.countUniqueElementsIn2DArray=function(t){var e=t.flat();return new Set(e).size},o.ff=function(t){if(console.log(this.countUniqueElementsIn2DArray(t)+"现在剩下矩阵的颜色数量"),console.log(this.len+"这一轮的len值"),this.countUniqueElementsIn2DArray(t)<this.len+1){if(console.log("满足完全消除玩一个动物"),console.log("现在reward——time的值是"+this.reward_time),this.reward_time)return;console.log("触发了ff");for(var e=0;e<this.size;e++)for(var i=0;i<this.size;i++)if(null===this.colorArray[e][i]){var r=this.getTileAt(e,i);this.PArray();var n=this.pArray.indexOf(r);this.indexArray.push(n)}console.log(this.indexArray+"数组"),this.f()}},o.moveNode=function(t,e,i,r){var n=this;if(!this.animatedNodes.has(t)){this.isMoving=!0;t.getWorldPosition();this.colorArray[i][r]=null,c(t).to(.5,{worldPosition:e}).call((function(){n.isMoving=!1,n.cstate=!1,console.log("1111"),n.animatedNodes.add(t),n.currentRound>2&&(console.log("现在是大于第三轮"),n.ff(n.colorArray))})).start(),this.cstate=!0}},o.updateround=function(){this.changeBState(),this.nullstate=!1,this.currentRound++,this.startNewRound(),this.reward_time=!1,4==y.getInstance().rewardtype?y.getInstance().rewardtype=4:y.getInstance().rewardtype=null},o.updaterotate=function(){for(var t,e=this.node.children,i=a(e);!(t=i()).done;){var r=t.value;r.eulerAngles=h.ZERO,r.destroy()}this.node.eulerAngles=h.ZERO},o.startNewRound=function(){switch(this.currentRound){case 1:this.size=2,this.init(this.size);break;case 2:this.updaterotate(),this.size=2,this.init(this.size);break;case 3:this.updaterotate(),this.size=3,this.init(this.size);break;case 4:this.updaterotate(),this.size=4,this.init(this.size);break;default:return this.updaterotate(),this.size=5,void this.init(this.size)}},o.init=function(t){for(var e=0;e<t;e++){this.tileMatrix[e]=new Array(t),this.colorArray[e]=new Array(t),this.titleMatrix_pos[e]=new Array(t);for(var i=0;i<t;i++){var r=Math.floor(4*Math.random()),n=null;switch(r){case H.Red:n=this.c4;break;case H.Yellow:n=this.c2;break;case H.purple:n=this.c3;break;case H.while:n=this.c1}var a=u(n);a.setParent(this.node);var o=new h(i*this.blockSize-t/2*50+25,e*this.blockSize-t/2*50+25,0);a.setPosition(o),this.tileMatrix[e][i]=a,this.colorArray[e][i]=r,this.titleMatrix_pos[e][i]=o}}this.len=this.countUniqueElementsIn2DArray(this.colorArray)},o.onLoad=function(){e.instance=this,f.on(d.EventType.TOUCH_START,this.onTouchStart,this),f.on(d.EventType.TOUCH_END,this.onTouchEnd,this)},o.onTouchStart=function(t){console.log("点击"),this.touchStartPos=t.getLocation()},o.onTouchEnd=function(t){console.log("松开");var e=t.getLocation(),i=this.getSwipeDirection(this.touchStartPos,e);this.handleSwipe(i)},o.getSwipeDirection=function(t,e){var i=e.x-t.x,r=e.y-t.y;if(Math.abs(i)>Math.abs(r)){if(i>0)return"right";if(i<0)return"left"}else{if(r>0)return"up";if(r<0)return"down"}return"none"},o.handleSwipe=function(t){if(!y.getInstance().gameoverState&&!this.rotateState)switch(t){case"up":if(console.log("up"),!y.getInstance().isAnimationFinished)return;console.log("Swipe Up"),this.markToRemove("u"),this.cstate||y.getInstance().dlive();break;case"down":if(!y.getInstance().isAnimationFinished)return;console.log("Swipe Down"),this.markToRemove("d"),this.cstate||y.getInstance().dlive();break;case"left":if(!y.getInstance().isAnimationFinished)return;console.log("Swipe Left"),this.markToRemove("l"),this.cstate||y.getInstance().dlive();break;case"right":if(!y.getInstance().isAnimationFinished)return;console.log("Swipe Right"),this.markToRemove("r"),this.cstate||y.getInstance().dlive()}},o.markToRemove=function(t){for(var e=this,i=this.size,r="r"===t||"l"===t,n="r"===t||"u"===t,a=function(t,e){return t===e||null===t||4===t},o=Array.from({length:i},(function(){return Array(i).fill(!1)})),s="r"===t||"u"===t?i-1:0,l="r"===t||"u"===t?0:i-1,u=0;u<i;u++)for(var c=0,h=s;n?h>=l:h<=l;n?h--:h++){if(!a(this.colorArray[r?u:h][r?h:u],this.getTargetColor(t))){if(c>0){for(var f=h+(n?1:-1);n?f<=h+c:f>=h-c;n?f++:f--)r?o[u][f]=!0:o[f][u]=!0;c=0}break}if(++c>0&&h===l)for(var d=h;n?d<h+c:d>h-c;n?d++:d--)r?o[u][d]=!0:o[d][u]=!0}if(this.moveNodes(o,i,t),this.areAllElementsNull(this.colorArray)){if(this.nullstate)return;this.nullstate=!0,this.changeBStatef(),setTimeout((function(){e.updateround(),y.getInstance().aTime(),e.upPArray()}),700)}},o.getTargetColor=function(t){switch(t){case"r":return 1;case"l":return 3;case"d":return 0;case"u":return 2}},o.fx=function(){},o.moveNodes=function(t,e,i){for(var r=this,n=0;n<e;n++)for(var a=function(){if(!0===t[n][o]&&null!==r.colorArray[n][o]){var e=r.getTileAt(n,o),a=e.getWorldPosition(),s=function(t){switch(t){case"r":return new h(a.x+500,a.y,a.z);case"l":return new h(a.x-500,a.y,a.z);case"d":return new h(a.x,a.y-500,a.z);case"u":return new h(a.x,a.y+500,a.z)}}(i);r.moveNode(e,s,n,o)}},o=0;o<e;o++)a()},o.changeBState=function(){this.state_button=!0},o.changeBStatef=function(){this.state_button=!1},o.getTileAt=function(t,e){return this.tileMatrix[t][e]},o.onrotateButton=function(){var t=this;if(!y.getInstance().gameoverState&&!this.isMoving&&y.getInstance().isAnimationFinished&&(g("GameManager/audio").getComponent(w).playClick(),this.state_button)){var e=this.node.angle-90;this.rotateState=!0;for(var i,r=c(this.node).to(1,{angle:e},{easing:"quadInOut"}).call((function(){t.rotateState=!1,t.changeBState()})),n=this.node.children,o=a(n);!(i=o()).done;){var s=i.value,l=s.angle+90;c(s).to(1,{angle:l},{easing:"quadInOut"}).start()}r.start(),this.changeBStatef(),this.currentTween=r,this.tileMatrix=this.rotateMatrix90Degrees(this.tileMatrix),this.colorArray=this.rotateMatrix90Degrees(this.colorArray),this.titleMatrix_pos=this.rotateMatrix90Degrees(this.titleMatrix_pos)}},o.rotateMatrix90Degrees=function(t){for(var e=t.length,i=Array.from({length:e},(function(){return Array(e).fill(null)})),r=0;r<e;r++)for(var n=0;n<e;n++)i[e-1-n][r]=t[r][n];return i},o.areAllElementsNull=function(t){return t.every((function(t){return t.every((function(t){return null===t}))}))},o.update=function(t){this.dstate||0===y.getInstance().live&&(console.log("死了"),y.getInstance().gameover(),this.dstate=!0)},e}(p)).instance=void 0,_=e((R=B).prototype,"blockSize",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),N=e(R.prototype,"c1",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(R.prototype,"c2",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(R.prototype,"c3",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(R.prototype,"c4",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=e(R.prototype,"liveui",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(R.prototype,"reward1",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(R.prototype,"reward2",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=R))||P));o._RF.pop()}}}));

System.register("chunks:///_virtual/curbMove.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fance.ts","./GameManager.ts","./tx_col.ts","./Audio.ts"],(function(e){var t,o,n,i,r,a,c,l,s,u,p,d,g,f,y,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,c=e.Collider2D,l=e.Contact2DType,s=e.find,u=e.Sprite,p=e.Vec3,d=e.Component},function(e){g=e.fance},function(e){f=e.GameManager},function(e){y=e.tx_col},function(e){m=e.Audio}],execute:function(){var h,C,x,v,b;r._RF.push({},"0b8d4+YLA9BS7K1ildol4Gf","curbMove",void 0);var z=a.ccclass,M=a.property;e("curbMove",(h=z("curbMove"),C=M(),h((b=t((v=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).collider=null,t.hasAnimated=!1,n(t,"score_self",b,i(t)),t}o(t,e);var r=t.prototype;return r.start=function(){this.collider=this.getComponent(c),this.collider&&this.collider.on(l.BEGIN_CONTACT,this.onBeginContact,this)},r.onBeginContact=function(e,t,o){if(t.getComponent(g)){if(console.log("发生碰撞了"),f.getInstance().timeoutState&&f.getInstance().addscore(this.score_self),s("GameManager/audio").getComponent(m).audioSource.playing)return;s("GameManager/audio").getComponent(m).playCollider(),this.node.getComponent(u).enabled=!1,e.enabled=!1;var n=e.node.getWorldPosition(),i=t.node.getWorldPosition();console.log(n.x+"pos.x"),console.log(n.y+"pos.y"),console.log(n.z+"pos.z"),n=i.x>500&&i.x<800?new p(645,n.y,n.z):i.y>700&&i.y<1200?f.getInstance().timeoutState?new p(n.x,946,n.z):new p(n.x,930,n.z):i.x>-100&&i.x<300?new p(75,n.y,n.z):f.getInstance().timeoutState?new p(n.x,377,n.z):new p(n.x,360,n.z),s("Canvas/Mid/Fance").getComponent(y).txcreator(1,n)}},r.update=function(e){},t}(d)).prototype,"score_self",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),x=v))||x));r._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/fance.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./reward.ts"],(function(e){var t,n,a,o,r,i,c,s,p,l,u,d;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,a=e._decorator,o=e.Collider2D,r=e.Contact2DType,i=e.find,c=e.Animation,s=e.Sprite,p=e.Component},function(e){l=e.GameManager},function(e){u=e.reward,d=e.RewardType}],execute:function(){var g;n._RF.push({},"a62bf8Yk3FFCb1XFgov+WQo","fance",void 0);var f=a.ccclass;a.property,e("fance",f("fance")(g=function(e){function n(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).collider=null,t}t(n,e);var a=n.prototype;return a.start=function(){this.collider=this.getComponent(o),this.collider&&this.collider.on(r.BEGIN_CONTACT,this.onBeginContact,this)},a.onBeginContact=function(e,t,n){var a=t.getComponent(u);a&&this.onContactReward(a)},a.onContactReward=function(e){switch(e.rewardType){case d.half:l.getInstance().rewardtype=0,i("Canvas/Mid/tiptx2").getComponent(c).play("tiptx");break;case d.Two:l.getInstance().rewardtype=3,i("Canvas/Mid/tiptx1").getComponent(c).play("tiptx");break;case d.pause:l.getInstance().rewardtype=4,l.getInstance().pausetime=e.rewardpausetime,i("Canvas/Top/timeUI/pausebg").getComponent(c).play("pausetx")}e.getComponent(o).enabled=!1,e.getComponent(s).enabled=!1},a.update=function(e){},n}(p))||g);n._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./liveUI.ts","./GameoverUI.ts","./TimeUI.ts","./ScoreUI.ts","./pauseui.ts","./Audio.ts","./newcurbeParent.ts","./MainGamePanel.ts","./all.ts","./MapPanel.ts"],(function(e){var t,i,n,a,o,r,l,s,u,c,m,h,p,g,f,d,v,S,y,b,I,w,C,U,G,_;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,l=e.Animation,s=e.Node,u=e.Label,c=e.SpriteFrame,m=e.director,h=e.find,p=e.Sprite,g=e.Vec3,f=e.tween,d=e.Component},function(e){v=e.liveUI},function(e){S=e.GameoverUI},function(e){y=e.TimeUI},function(e){b=e.ScoreUI},function(e){I=e.pauseui},function(e){w=e.Audio},function(e){C=e.newcurbeParent},function(e){U=e.MainGamePanel},function(e){G=e.All},function(e){_=e.MapPanel}],execute:function(){var M,T,A,k,z,P,B,F,L,N,D,R,H,O,E,x,J,V,j,q,K,Q,W,X,Y,Z,$,ee,te,ie,ne,ae;o._RF.push({},"16087Vuv0RGp64+GdLEGO6S","GameManager",void 0);var oe=r.ccclass,re=r.property;e("GameManager",(M=oe("GameManager"),T=re(),A=re(),k=re(v),z=re(S),P=re(y),B=re(b),F=re(l),L=re(l),N=re(I),D=re(s),R=re(u),H=re(l),O=re(s),E=re(c),M(((ae=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,n(t,"time",V,a(t)),t.totaltime=0,n(t,"live",j,a(t)),t.atimeState=!1,n(t,"liveui",q,a(t)),n(t,"GameoverUI",K,a(t)),n(t,"TimeUI",Q,a(t)),n(t,"ScoreUI",W,a(t)),t.score=0,n(t,"animation",X,a(t)),n(t,"animation_add",Y,a(t)),n(t,"pauseui",Z,a(t)),n(t,"countdown",$,a(t)),t.bg=null,n(t,"socre_high",ee,a(t)),t.high_socre=0,t.isAnimationFinished=!1,t.gameoverState=!1,t.remainingTime=10,t.timer=null,n(t,"animation_dlive",te,a(t)),n(t,"victroyui",ie,a(t)),t.timeoutState=void 0,n(t,"frame_sp",ne,a(t)),t.rewardtype=null,t.pausetotal=0,t.pausetime=0,t}i(t,e),t.getInstance=function(){return this.instance};var o=t.prototype;return o.start=function(){var e=this;this.timeoutState=!1,m.getScene().getChildByName("Canvas").getComponent(U)||(this.timeoutState=!0),t.instance=this,this.timeoutState&&(this.socre_high.string=this.highest_score().toString(),this.liveui.liveUIChange(this.live),this.animation.on(l.EventType.FINISHED,(function(){e.isAnimationFinished=!0,e.bg=e.countdown.getChildByName("countdownbg"),e.bg.active=!1})))},o.onAnimationFinish=function(){this.isAnimationFinished=!0,console.log("Animation finished!")},o.addTime_reward=function(){this.time=20,this.TimeUI.TimeUI(this.time)},o.alive=function(){this.live=3,this.liveui.liveUIChange(this.live)},o.dlive=function(){this.live-=1,this.live<=0&&(this.live=0),h("GameManager/audio").getComponent(w).playDlive(),this.animation_dlive.play("dliveUI"),this.liveui.liveUIChange(this.live)},o.dTime=function(){this.time-=1,0==this.time&&(this.time=0),this.TimeUI.TimeUI(this.time)},o.aTime=function(){this.atimeState=!0,this.time+=2},o.addscore=function(e){this.gameoverState||(0===this.rewardtype?this.score+=Math.floor(e/2):3===this.rewardtype?this.score+=2*e:this.score+=e,this.ScoreUI.scoreui(this.score))},o.onPauseButtonClick=function(){C.getInstance().changeBState(),h("GameManager/audio").getComponent(w).playClick(),this.pauseui.starshowPauseUI(C.getInstance().levelStar)},o.onPauseButtonClick_Speed=function(){m.pause(),h("GameManager/audio").getComponent(w).playClick(),this.pauseui.showPauseUI()},o.onReturnmain=function(){h("GameManager/audio").getComponent(w).playClick(),m.resume(),setTimeout((function(){m.loadScene("Start_scene")}),500)},o.onReturnMap=function(){h("GameManager/audio").getComponent(w).playClick(),m.resume(),m.loadScene("Map")},o.onStartButtonCLick=function(){h("GameManager/audio").getComponent(w).playClick(),m.resume(),this.pauseui.hidePauseUI()},o.onRestartButtonClick=function(){h("GameManager/audio").getComponent(w).playClick(),this.onStartButtonCLick(),setTimeout((function(){m.loadScene(m.getScene().name)}),500)},o.highest_score=function(){var e=localStorage.getItem("HighestScore"),t=0;return null!==e&&(t=parseInt(e,10)),this.score>t&&localStorage.setItem("HighestScore",this.score.toString()),e=localStorage.getItem("HighestScore"),t=parseInt(e,10),null==e&&(t=0),t},o.f=function(){h("GameManager/audio").getComponent(w).playClick();var e=C.getInstance().level,t=JSON.parse(localStorage.getItem("settings")),i=t[e].S1,n=t[e].S2,a=t[e].S3,o=t[e].L1,r=t[e].L2,l=t[e].L3;m.loadScene("Map"),localStorage.setItem("currentLevelInfo",JSON.stringify(t[e])),G.setStateDialog(!0),setTimeout((function(){_.getInstance().showleveldialog(e+1,i,n,a,o,r,l)}),500)},o.playStarAnimation=function(e,t){var i=e.getComponent(l);i&&(i.play("star_finaltx"),i.on("finished",(function(){t&&t()})))},o.gameoverStar=function(e){var t=this,i=this.victroyui.getChildByName("content").children[4];switch(e){case 1:console.log("触发1颗星的时间"),i.children[1].active=!0,this.playStarAnimation(i.children[1],(function(){}));break;case 2:console.log("触发二颗星的时间"),i.children[1].active=!0,this.playStarAnimation(i.children[1],(function(){i.children[3].active=!0,t.playStarAnimation(i.children[3],(function(){}))}));break;case 3:console.log("触发三颗星的时间"),i.children[1].active=!0,this.playStarAnimation(i.children[1],(function(){i.children[3].active=!0,t.playStarAnimation(i.children[3],(function(){i.children[5].active=!0,t.playStarAnimation(i.children[5],(function(){}))}))}))}},o.showDialog=function(e,t,i){var n=this;this.gameoverState=!0,setTimeout((function(){n.victroyui.active=!0;var a=n.victroyui.getChildByName("content");0==e?(h("GameManager/audio").getComponent(w).playGameover(),a.children[0].getComponent(p).spriteFrame=n.frame_sp,n.victroyui.children[2].active=!1,a.children[3].active=!1,a.children[2].setPosition(0,-250,0)):h("GameManager/audio").getComponent(w).playlevelvic();t==i&&(a.children[3].active=!1,a.children[2].setPosition(0,-250,0)),a.scale=new g(0,0,0),f(a).to(.4,{scale:new g(1,1,1)},{easing:"backOut"}).call((function(){n.gameoverStar(e)})).start()}),500)},o.gameover=function(){this.gameoverState=!0,this.high_socre=this.highest_score(),h("GameManager/audio").getComponent(w).playGameover(),this.GameoverUI.gameoverui(this.high_socre,this.score,this.live)},o.update=function(e){if(this.isAnimationFinished&&!this.gameoverState){if(this.totaltime+=e,this.atimeState&&(this.TimeUI.TimeUI(this.time),this.animation_add.play("animation"),this.atimeState=!1),4===this.rewardtype)return this.pausetotal+=e,void(this.pausetotal>=this.pausetime&&(this.rewardtype=null,this.pausetotal=0));this.totaltime>=1&&this.time>0&&(this.dTime(),this.totaltime=0),this.timeoutState&&0==this.time&&this.gameover()}},t}(d)).instance=void 0,V=t((J=ae).prototype,"time",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 60}}),j=t(J.prototype,"live",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),q=t(J.prototype,"liveui",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(J.prototype,"GameoverUI",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(J.prototype,"TimeUI",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(J.prototype,"ScoreUI",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(J.prototype,"animation",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(J.prototype,"animation_add",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(J.prototype,"pauseui",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=t(J.prototype,"countdown",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=t(J.prototype,"socre_high",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=t(J.prototype,"animation_dlive",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=t(J.prototype,"victroyui",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=t(J.prototype,"frame_sp",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=J))||x));o._RF.pop()}}}));

System.register("chunks:///_virtual/GameoverUI.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,r,n,a,o,l,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,l=e.Label,u=e.Component}],execute:function(){var c,s,p,f,g,h,b,v,m;a._RF.push({},"3add8gh5nlLKLzVgmORaocf","GameoverUI",void 0);var y=o.ccclass,L=o.property;e("GameoverUI",(c=y("GameoverUI"),s=L(l),p=L(l),f=L(l),c((b=t((h=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,r(t,"highLabel",b,n(t)),r(t,"finallLabel",v,n(t)),r(t,"tip",m,n(t)),t}i(t,e);var a=t.prototype;return a.start=function(){},a.gameoverui=function(e,t,i){this.node.active=!0,this.highLabel.string="历史最高分："+e.toString(),this.finallLabel.string=t.toString(),this.tip.string=0===i?"看广告增加生命值":"看广告增加时间"},a.update=function(e){},t}(u)).prototype,"highLabel",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(h.prototype,"finallLabel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=t(h.prototype,"tip",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=h))||g));a._RF.pop()}}}));

System.register("chunks:///_virtual/GlobalState.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"f646eCw5WZFOYDjcNUPtYuj","GlobalState",void 0),t("GlobalPopupState",function(){function t(){this.isPopupActive=!0}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t}()).instance=void 0,n._RF.pop()}}}));

System.register("chunks:///_virtual/level.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MapPanel.ts"],(function(t){var e,i,n,r,o,l,s,a,c,h,p,d,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,l=t._decorator,s=t.SpriteFrame,a=t.Input,c=t.Sprite,h=t.Label,p=t.find,d=t.Component},function(t){u=t.MapPanel}],execute:function(){var g,m,v,P,f,y,S,C,w,F,b;o._RF.push({},"92fc7MRV5VOpZkhWEMT3/8Q","level",void 0);var k=l.ccclass,D=l.property;t("level",(g=k("level"),m=D(s),v=D(s),P=D(s),f=D(s),g((C=e((S=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return e=t.call.apply(t,[this].concat(o))||this,n(e,"lockPic",C,r(e)),n(e,"greyStartPic",w,r(e)),n(e,"yellowStartPic",F,r(e)),e.s1=void 0,e.s2=void 0,e.s3=void 0,e.l1=void 0,e.l2=void 0,e.l3=void 0,n(e,"completedBackgroundPic",b,r(e)),e.settings=void 0,e.level=null,e}i(e,t);var o=e.prototype;return o.start=function(){this.node.on(a.EventType.TOUCH_END,this.onTouchStart,this)},o.initgreyStart=function(){var t=this.node.children[2];t.children[0].getComponent(c).spriteFrame=this.greyStartPic,t.children[1].getComponent(c).spriteFrame=this.greyStartPic,t.children[2].getComponent(c).spriteFrame=this.greyStartPic},o.onePass=function(){var t=this.node.children[2];t.children[0].getComponent(c).spriteFrame=this.yellowStartPic,t.children[1].getComponent(c).spriteFrame=this.greyStartPic,t.children[2].getComponent(c).spriteFrame=this.greyStartPic},o.twoPass=function(){var t=this.node.children[2];t.children[0].getComponent(c).spriteFrame=this.yellowStartPic,t.children[1].getComponent(c).spriteFrame=this.yellowStartPic,t.children[2].getComponent(c).spriteFrame=this.greyStartPic},o.thridPass=function(){var t=this.node.children[2];t.children[0].getComponent(c).spriteFrame=this.yellowStartPic,t.children[1].getComponent(c).spriteFrame=this.yellowStartPic,t.children[2].getComponent(c).spriteFrame=this.yellowStartPic},o.saveMessage=function(t,e,i,n,r,o,l){this.level=t,this.s1=e,this.s2=i,this.s3=n,this.l1=r,this.l2=o,this.l3=l},o.changePic=function(t,e,i){"UNLOCKED"===t?(this.node.children.forEach((function(t){t.active=!0})),this.node.children[0].active=!0,this.node.children[0].getComponent(h).string=e.toString(),this.initgreyStart()):"PASSED"===t?(1===i?this.onePass():2===i?this.twoPass():3===i&&this.thridPass(),this.node.children[0].active=!0,this.node.children[0].getComponent(h).string=e.toString(),this.node.getComponent(c).spriteFrame=this.completedBackgroundPic):"LOCKED"===t&&(this.node.children[2].active=!1)},o.onTouchStart=function(){"LOCKED"!=this.settings.levelState&&(localStorage.setItem("currentLevelInfo",JSON.stringify(this.settings)),p("Canvas/Camera/Bg/Mask/bg/Map").getComponent(u).showleveldialog(this.level,this.s1,this.s2,this.s3,this.l1,this.l2,this.l3))},o.update=function(t){},e}(d)).prototype,"lockPic",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(S.prototype,"greyStartPic",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(S.prototype,"yellowStartPic",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=e(S.prototype,"completedBackgroundPic",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=S))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/liveUI.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,i,r,o,c,l,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,c=e._decorator,l=e.Label,a=e.Component}],execute:function(){var u,s,p,f,v;o._RF.push({},"098cdQxcbFIGKgI6fHiCl6+","liveUI",void 0);var g=c.ccclass,h=c.property;e("liveUI",(u=g("liveUI"),s=h(l),u((v=t((f=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return t=e.call.apply(e,[this].concat(o))||this,i(t,"num",v,r(t)),t}n(t,e);var o=t.prototype;return o.liveUIChange=function(e){this.num.string=e.toString()},o.update=function(e){},t}(a)).prototype,"num",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=f))||p));o._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./BottomAdController.ts","./Audio.ts","./AudioMgr.ts","./BGM.ts","./GameManager.ts","./GameoverUI.ts","./MainGamePanel.ts","./MapPanel.ts","./level.ts","./ScoreUI.ts","./PrefabDistributorFromScript_Speed.ts","./StartUI.ts","./TimeUI.ts","./top.ts","./all.ts","./clickstartgame.ts","./cufbParent.ts","./curbMove.ts","./fance.ts","./liveUI.ts","./newGameManager.ts","./newaudio.ts","./newcurbeParent.ts","./pauseui.ts","./progress.ts","./reward.ts","./teach.ts","./BackgroundScroll.ts","./GlobalState.ts","./PlaySoundOnClick.ts","./PopupController.ts","./PrefabDistributorFromScript.ts","./UIController.ts","./tx_col.ts","./prefab.ts","./settings.ts","./skin.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MainGamePanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./newcurbeParent.ts"],(function(t){var e,n,r,i,a,s,o,l,u,p,c,h,d,g,f,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){a=t.cclegacy,s=t._decorator,o=t.Label,l=t.Node,u=t.Prefab,p=t.find,c=t.instantiate,h=t.Vec3,d=t.Sprite,g=t.Animation,f=t.Component},function(t){b=t.newcurbeParent}],execute:function(){var m,v,P,y,_,w,C,M,I,z,S,D,R,T,x;a._RF.push({},"54552McTptDTKnnmoUAHTw7","MainGamePanel",void 0);var G=s.ccclass,A=s.property;t("MainGamePanel",(m=G("MainGamePanel"),v=A(o),P=A(l),y=A(u),_=A(l),w=A(o),C=A(),m((z=e((I=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a))||this,r(e,"stepCount",z,i(e)),r(e,"barnode",S,i(e)),r(e,"starPrefab",D,i(e)),e.starnode1=null,e.starnode2=null,e.progress=void 0,e.progress_term=void 0,r(e,"termStarnode",R,i(e)),r(e,"l3",T,i(e)),r(e,"progresswidth",x,i(e)),e.star2_over_state=!1,e}n(e,t);var a=e.prototype;return a.start=function(){this.upstep(),p("Canvas/Mid/curbParent").on("upstep",this.upstep,this),p("Canvas/Mid/curbParent").on("defeat",this.defeat,this),p("Canvas/Mid/curbParent").on("2starover",this.star_2over,this),p("Canvas/Mid/curbParent").on("uptermstar",this.uptermstar,this),p("Canvas/Mid/curbParent").on("initl3",this.initl3,this),this.f()},a.f=function(){this.starnode2=c(this.starPrefab),this.barnode.addChild(this.starnode2);var t=Math.round(10*(1-b.getInstance().Minstep/(b.getInstance().Maxstep+1)))/10;console.log(t);var e=new h(t*this.progresswidth,0,0);this.starnode2.setPosition(e),this.starnode1=c(this.starPrefab),this.barnode.addChild(this.starnode1);var n=new h(1/(b.getInstance().Maxstep+1)*this.progresswidth,0,0);this.starnode1.setPosition(n)},a.upstep=function(){this.stepCount.string=b.getInstance().step.toString()+"步",this.progress=(b.getInstance().step+1)/(b.getInstance().Maxstep+1),this.barnode.getComponent(d).fillRange=this.progress},a.uptermstar=function(){this.progress_term=b.getInstance().termStarprogress/b.getInstance().totalProgress,this.termStarnode.getComponent(d).fillRange=this.progress_term},a.initl3=function(){this.l3.string=b.getInstance().l3},a.defeat=function(){var t=this,e=this.starnode1.getComponent(g);e?(e.play("progress_star"),console.log("有animation")):console.log("没有animation"),this.barnode.getComponent(d).fillRange=0,e.on(g.EventType.FINISHED,(function(){console.log("星星灭了动画完成"),t.node.emit("defeat-finished")}))},a.star_2over=function(){if(!this.star2_over_state){this.star2_over_state=!0;var t=this.starnode2.getComponent(g);t&&(t.play("progress_star"),console.log("有animation"))}},a.update=function(t){},e}(f)).prototype,"stepCount",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(I.prototype,"barnode",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(I.prototype,"starPrefab",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(I.prototype,"termStarnode",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=e(I.prototype,"l3",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(I.prototype,"progresswidth",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 550}}),M=I))||M));a._RF.pop()}}}));

System.register("chunks:///_virtual/MapPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./settings.ts","./level.ts","./all.ts"],(function(e){var t,n,l,i,a,o,s,r,c,g,v,d,u,f,h,p,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,l=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,s=e.Prefab,r=e.instantiate,c=e.find,g=e.Label,v=e.Vec3,d=e.tween,u=e.director,f=e.Component},function(e){h=e.settings},function(e){p=e.level},function(e){b=e.All}],execute:function(){var S,m,P,y,C,L,w,M;a._RF.push({},"0903ahUZShGvab+YCy4lsjt","MapPanel",void 0);var k=o.ccclass,B=o.property;e("MapPanel",(S=k("MapPanel"),m=B(s),P=B(s),S(((M=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,l(t,"levelPrefab",L,i(t)),l(t,"leveldPrefab",w,i(t)),t.leveldnode=null,t}n(t,e),t.getInstance=function(){return this.instance};var a=t.prototype;return a.start=function(){t.instance=this,this.initLevels()},a.initLevels=function(){console.log("initLevels触发了");var e=this.node.children;if(localStorage.getItem("settings")){console.log("触发了不是第一次玩的情况");for(var t=JSON.parse(localStorage.getItem("settings")),n=0;n<t.length;n++){if(n>=e.length){console.warn("关卡数量超过了子节点数量，第 "+(n+1)+" 关未能分配位置");break}var l=r(this.levelPrefab),i=l.getComponent(p);i||console.log("没有levelscr"),i.settings=t[n],i.saveMessage(t[n].level,t[n].S1,t[n].S2,t[n].S3,t[n].L1,t[n].L2,t[n].L3),i.changePic(t[n].levelState,n+1,t[n].levelStar),e[n].addChild(l),l.setPosition(0,0,0)}}else{console.log("触发了第一次玩的情况");for(var a=0;a<h.length;a++){if(a>=e.length){console.warn("关卡数量超过了子节点数量，第 "+(a+1)+" 关未能分配位置");break}var o=r(this.levelPrefab),s=o.getComponent(p);s||console.log("没有levelscr"),s.settings=h[a],s.saveMessage(h[a].level,h[a].S1,h[a].S2,h[a].S3,h[a].L1,h[a].L2,h[a].L3),s.changePic(h[a].levelState,a+1,h[a].levelStar),e[a].addChild(o),o.setPosition(0,0,0)}localStorage.setItem("settings",JSON.stringify(h))}},a.showleveldialog=function(e,t,n,l,i,a,o){console.log("触发了"),console.log(this.leveldPrefab),this.leveldnode=r(this.leveldPrefab),c("Canvas/Camera/Bg/Mask").addChild(this.leveldnode);var s=this.leveldnode.getChildByName("content"),u=s.getChildByName("title"),f=s.getChildByName("star").children,h=f[6].children,p=[f[7],f[8],f[9]];[t,n,l].forEach((function(e,t){e&&(p[t].active=!0)})),h[0].getComponent(g).string=i,h[1].getComponent(g).string=a,h[2].getComponent(g).string=o,u.getComponent(g).string="关卡:"+e,s.scale=new v(0,0,0),d(s).to(.4,{scale:new v(1,1,1)},{easing:"backOut"}).call((function(){})).start()},a.hideleveldialog=function(){var e=this,t=this.leveldnode.getChildByName("content");d(t).to(.4,{scale:new v(0,0,0)},{easing:"backIn"}).call((function(){e.leveldnode.destroy(),b.setStateDialog(!1)})).start()},a.returnMain=function(){setTimeout((function(){u.loadScene("Start_scene")}),500)},t}(f)).instance=void 0,L=t((C=M).prototype,"levelPrefab",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(C.prototype,"leveldPrefab",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=C))||y));a._RF.pop()}}}));

System.register("chunks:///_virtual/newaudio.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var n,i,e,u,t,s,a,c,d;return{setters:[function(o){n=o.inheritsLoose},function(o){i=o.cclegacy,e=o._decorator,u=o.Node,t=o.director,s=o.AudioSource,a=o.resources,c=o.AudioClip,d=o.Component}],execute:function(){var r,l;i._RF.push({},"a97bdr05zVEcLis38V7/b6q","newaudio",void 0);var h=e.ccclass;e.property,o("newaudio",h("newaudio")(((l=function(o){function i(){for(var n,i=arguments.length,e=new Array(i),u=0;u<i;u++)e[u]=arguments[u];return(n=o.call.apply(o,[this].concat(e))||this).audioSource=null,n.soundCache=new Map,n.isSoundEnabled=!0,n.isMusicEnabled=!0,n}n(i,o),i.getInstance=function(){if(!i._instance){var o=new u("GlobalAudioManager");i._instance=o.addComponent(i),o.parent=t.getScene()}return i._instance};var e=i.prototype;return e.onLoad=function(){this.audioSource||(this.audioSource=this.node.addComponent(s))},e.start=function(){this.audioSource||(this.audioSource=this.node.addComponent(s))},e.playSound=function(o){var n=this;if(console.log("触发playSound1"),console.log(this.audioSource),console.log(this.isMusicEnabled),this.isSoundEnabled){if(console.log("触发playSoundw"),this.soundCache.has(o))return console.log("触发playSound3"),void this.audioSource.playOneShot(this.soundCache.get(o));a.load(o,c,(function(i,e){i?console.error("音效加载失败: "+o,i):(n.soundCache.set(o,e),n.audioSource.playOneShot(e))}))}},e.playBackgroundMusic=function(o,n){var i=this;if(void 0===n&&(n=!0),this.isMusicEnabled&&this.audioSource){if(this.soundCache.has(o)){var e=this.soundCache.get(o);return this.audioSource.clip=e,this.audioSource.loop=n,void this.audioSource.play()}a.load(o,c,(function(e,u){e?console.error("背景音乐加载失败: "+o,e):(i.soundCache.set(o,u),i.audioSource.clip=u,i.audioSource.loop=n,i.audioSource.play())}))}},e.stopBackgroundMusic=function(){this.audioSource&&this.audioSource.stop()},e.setSoundEnabled=function(o){this.isSoundEnabled=o},e.setMusicEnabled=function(o){this.isMusicEnabled=o,!o&&this.audioSource&&this.audioSource.stop()},e.getSoundEnabled=function(){return this.isSoundEnabled},e.getMusicEnabled=function(){return this.isMusicEnabled},i}(d))._instance=null,r=l))||r);i._RF.pop()}}}));

System.register("chunks:///_virtual/newcurbeParent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Audio.ts","./GameManager.ts"],(function(t){var e,i,n,r,o,s,a,l,u,h,c,f,g,v,p,d,m,S;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized,o=t.createForOfIteratorHelperLoose},function(t){s=t.cclegacy,a=t._decorator,l=t.Prefab,u=t.Node,h=t.input,c=t.Input,f=t.tween,g=t.find,v=t.Vec3,p=t.instantiate,d=t.Component},function(t){m=t.Audio},function(t){S=t.GameManager}],execute:function(){var b,y,w,x,_,z,I,M,P,L,N,T,A,k,O,D,C,E,R,j,J,B,H,U,F,G,q,K,V,W,Z,X,Q;s._RF.push({},"9b1e8w2ypVOf7/mSx46lXt3","newcurbeParent",void 0);var Y=a.ccclass,$=a.property;t("newcurbeParent",(b=Y("newcurbeParent"),y=$(l),w=$(l),x=$(l),_=$(l),z=$(l),I=$(l),M=$(l),P=$(l),L=$(l),N=$(l),T=$(l),A=$(l),k=$(u),O=$(u),b(((Q=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,n(e,"blockSize",E,r(e)),n(e,"no1",R,r(e)),n(e,"no2",j,r(e)),n(e,"no3",J,r(e)),n(e,"no4",B,r(e)),n(e,"no5",H,r(e)),n(e,"no6",U,r(e)),n(e,"no7",F,r(e)),n(e,"no8",G,r(e)),n(e,"no9",q,r(e)),n(e,"no10",K,r(e)),n(e,"no11",V,r(e)),n(e,"no12",W,r(e)),e.c1=null,e.c2=null,e.c3=null,e.c4=null,n(e,"panlNode",Z,r(e)),n(e,"termStarnode",X,r(e)),e.currentLevelInfo=void 0,e.step=0,e.level=void 0,e.levelsetting_round=void 0,e.round=void 0,e.size=void 0,e.Maxstep=void 0,e.Minstep=void 0,e.matrix=[],e.tileMatrix=[],e.xcmatrixArray=[],e.Prefab_type=[],e.levelStar=0,e.l3=void 0,e.termStarprogress=0,e.totalProgress=void 0,e.starlight_third=!1,e.touchStartPos=void 0,e.isMoving=!1,e.state_button=!0,e.rotateState=!1,e.tiaojian_mz=0,e.levelStarState=!1,e.roundStarterm=0,e.animatedNodes=new Set,e.currentTween=null,e.prefabMap=[],e.finalstepState=!1,e.state_pdsb=!1,e}i(e,t),e.getInstance=function(){return this.instance};var s=e.prototype;return s.onLoad=function(){e.instance=this,this.currentLevelInfo=JSON.parse(localStorage.getItem("currentLevelInfo")),this.Prefab_type=this.currentLevelInfo.type,this.level=this.currentLevelInfo.level,this.levelsetting_round=this.currentLevelInfo.levelsetting[0],this.round=this.levelsetting_round.round,this.matrix=this.levelsetting_round.matrix,this.size=this.currentLevelInfo.size,this.Maxstep=this.currentLevelInfo.MaxCount,this.Minstep=this.currentLevelInfo.MinCount,this.step=this.currentLevelInfo.MaxCount,this.termStarprogress=0,this.l3=this.currentLevelInfo.L3,this.totalProgress=this.currentLevelInfo.levelsetting.length*this.currentLevelInfo.term_num,this.creatorPrefab()},s.start=function(){this.node.emit("initl3"),this.init(this.size),h.on(c.EventType.TOUCH_START,this.onTouchStart,this),h.on(c.EventType.TOUCH_END,this.onTouchEnd,this)},s.onTouchStart=function(t){console.log("点击"),this.touchStartPos=t.getLocation()},s.onTouchEnd=function(t){console.log("松开");var e=t.getLocation(),i=this.getSwipeDirection(this.touchStartPos,e);this.handleSwipe(i)},s.getSwipeDirection=function(t,e){var i=e.x-t.x,n=e.y-t.y;if(Math.abs(i)>Math.abs(n)){if(i>0)return"right";if(i<0)return"left"}else{if(n>0)return"up";if(n<0)return"down"}return"none"},s.upstep=function(){this.isMoving&&(this.step--,this.step<=0&&(this.step=0),console.log("这时步数减一"),this.step<this.Maxstep-this.Minstep&&this.node.emit("2starover"),this.node.emit("upstep"))},s.handleSwipe=function(t){if(!(this.isMoving||S.getInstance().gameoverState||this.rotateState)&&0!=this.step)switch(t){case"up":console.log("up"),console.log("Swipe Up"),this.markToRemove("u"),this.upstep();break;case"down":console.log("Swipe Down"),this.markToRemove("d"),this.upstep();break;case"left":console.log("Swipe Left"),this.markToRemove("l"),this.upstep();break;case"right":console.log("Swipe Right"),this.markToRemove("r"),this.upstep()}},s.markToRemove=function(t){for(var e=this.size,i="r"===t||"l"===t,n="r"===t||"u"===t,r=function(t,e){return t===e||null===t},o=Array.from({length:e},(function(){return Array(e).fill(!1)})),s="r"===t||"u"===t?e-1:0,a="r"===t||"u"===t?0:e-1,l=0;l<e;l++)for(var u=0,h=s;n?h>=a:h<=a;n?h--:h++){if(!r(this.matrix[i?l:h][i?h:l],this.getTargetColor(t))){if(u>0){for(var c=h+(n?1:-1);n?c<=h+u:c>=h-u;n?c++:c--)i?o[l][c]=!0:o[c][l]=!0;u=0}break}if(++u>0&&h===a)for(var f=h;n?f<h+u:f>h-u;n?f++:f--)i?o[l][f]=!0:o[f][l]=!0}this.moveNodes(o,e,t)},s.getTargetColor=function(t){switch(t){case"r":return 2;case"l":return 1;case"d":return 4;case"u":return 3}},s.moveNodes=function(t,e,i){var n=this;this.xcmatrixArray=[];for(var r=0;r<e;r++)for(var o=function(){if(!0===t[r][s]){var e=n.getTileAt(r,s),o=e.getWorldPosition(),a=function(t){switch(t){case"r":return new v(o.x+500,o.y,o.z);case"l":return new v(o.x-500,o.y,o.z);case"d":return new v(o.x,o.y-500,o.z);case"u":return new v(o.x,o.y+500,o.z)}}(i);n.moveNode(e,a,r,s)}},s=0;s<e;s++)o()},s.getTileAt=function(t,e){return this.tileMatrix[t][e]},s.xcupdate_tj=function(){this.level},s.xcupdate=function(t,e){var i=JSON.parse(localStorage.getItem("settings")),n=i[this.level-1].term_num;if(this.xcmatrixArray.push(this.matrix[t][e]),console.log("这时移除了元素"),this.matrix[t][e]=null,this.xcmatrixArray.length>=i[this.level-1].term_onexc&&(this.tiaojian_mz++,this.termStarprogress++,this.node.emit("uptermstar"),console.log("第三条件在这一轮达成一个")),this.tiaojian_mz>=n){if(this.levelStarState)return;this.roundStarterm+=1,console.log("该轮的条件达成"),this.levelStarState=!0}this.roundStarterm==this.currentLevelInfo.levelsetting.length&&(this.starlight_third=!0,this.termStarnode.active=!0,console.log("条件星点亮"))},s.moveNode=function(t,e,i,n){var r=this;if(!this.animatedNodes.has(t)){this.isMoving=!0;t.getWorldPosition();f(t).to(.5,{worldPosition:e}).call((function(){r.isMoving=!1,r.xcupdate(i,n),console.log("1111"),r.animatedNodes.add(t)})).start()}},s.changeBState=function(){this.state_button=!0},s.onrotateButton=function(){var t=this;if(!S.getInstance().gameoverState&&!this.isMoving&&(g("GameManager/audio").getComponent(m).playClick(),this.state_button)){var e=this.node.angle-90;this.rotateState=!0;for(var i,n=f(this.node).to(1,{angle:e},{easing:"quadInOut"}).call((function(){t.rotateState=!1,t.changeBState()})),r=this.node.children,s=o(r);!(i=s()).done;){var a=i.value,l=a.angle+90;f(a).to(1,{angle:l},{easing:"quadInOut"}).start()}n.start(),this.state_button=!1,this.currentTween=n,this.tileMatrix=this.rotateMatrix90Degrees(this.tileMatrix),this.matrix=this.rotateMatrix90Degrees(this.matrix)}},s.rotateMatrix90Degrees=function(t){for(var e=t.length,i=Array.from({length:e},(function(){return Array(e).fill(null)})),n=0;n<e;n++)for(var r=0;r<e;r++)i[e-1-r][n]=t[n][r];return i},s.areAllElementsNull=function(t){return t.every((function(t){return t.every((function(t){return null===t}))}))},s.updaterotate=function(){for(var t,e=this.node.children,i=o(e);!(t=i()).done;){var n=t.value;n.eulerAngles=v.ZERO,n.destroy()}this.node.eulerAngles=v.ZERO},s.saveStar_final=function(t){t[this.level-1].levelStar<=this.levelStar&&(t[this.level-1].levelStar=this.levelStar),console.log("saveStar_final中的"+this.levelStar);var e=JSON.parse(localStorage.getItem("settings")).length;console.log(e+"totallevel"),console.log(this.level+"level"),S.getInstance().showDialog(this.levelStar,this.level,e),localStorage.setItem("settings",JSON.stringify(t))},s.defeat=function(t){var e=this;S.getInstance().gameoverState=!0,this.panlNode.on("defeat-finished",(function(){e.levelStar=0,e.saveStar_final(t)}),this),this.node.emit("defeat")},s.updateround=function(t){if(console.log("更新轮次触发了"),this.round++,this.levelStarState=!1,this.tiaojian_mz=0,this.round<=this.currentLevelInfo.levelsetting.length){if(0==this.step){if(S.getInstance().gameoverState)return;return console.log("这里是步数等于0，消除完但不是最后一轮的情况"),this.defeat(t)}this.levelsetting_round=this.currentLevelInfo.levelsetting[this.round-1],this.matrix=this.levelsetting_round.matrix,this.updaterotate(),this.init(this.size),this.state_pdsb=!1}else{if(S.getInstance().gameoverState)return;this.step==this.Maxstep-this.Minstep?(this.levelStar+=2,t[this.level-1].S1=!0,t[this.level-1].S2=!0):this.step<this.Maxstep-this.Minstep&&(this.levelStar+=1,t[this.level-1].S1=!0),this.starlight_third&&(this.levelStar+=1,t[this.level-1].S3=!0),t[this.level-1].levelState="PASSED",t[this.level]&&"LOCKED"==t[this.level].levelState&&(t[this.level].levelState="UNLOCKED"),console.log("showdialog触发了几次"),this.saveStar_final(t)}},s.creatorPrefab=function(){console.log("触发了"),console.log("------------------------------------------"),console.log(this.Prefab_type),this.c1=this["no"+this.Prefab_type[0]],this.c2=this["no"+this.Prefab_type[1]],this.c3=this["no"+this.Prefab_type[2]],this.c4=this["no"+this.Prefab_type[3]],console.log("no"+this.Prefab_type[0]),console.log(this.Prefab_type[1]),console.log(this.Prefab_type[2]),console.log(this.Prefab_type[3]),console.log("------------------------------------------")},s.getCNamePrefab=function(t){},s.init=function(t){for(var e=0;e<t;e++){this.tileMatrix[e]=new Array(t);for(var i=0;i<t;i++){var n=null;switch(this.matrix[e][i]){case 1:n=this.c1;break;case 2:n=this.c2;break;case 3:n=this.c3;break;case 4:n=this.c4}console.log("==============================="),console.log(n),console.log("===============================");var r=p(n);r.setParent(this.node);var o=new v(i*this.blockSize-t/2*50+25,e*this.blockSize-t/2*50+25,0);r.setPosition(o),this.tileMatrix[e][i]=r}}},s.time_upround=function(){var t=this;if(!S.getInstance().gameoverState&&!this.state_pdsb){if(this.areAllElementsNull(this.matrix)){console.log("空了");var e=JSON.parse(localStorage.getItem("settings"));this.updateround(e)}if(0==this.step){if(this.finalstepState)return;this.finalstepState=!0,setTimeout((function(){if(!t.areAllElementsNull(t.matrix)){var e=JSON.parse(localStorage.getItem("settings"));console.log("这里是步数等于0的任何情况"),t.defeat(e)}}),1e3)}}},s.update=function(t){this.time_upround()},e}(d)).instance=void 0,E=e((C=Q).prototype,"blockSize",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),R=e(C.prototype,"no1",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(C.prototype,"no2",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(C.prototype,"no3",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(C.prototype,"no4",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(C.prototype,"no5",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(C.prototype,"no6",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(C.prototype,"no7",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(C.prototype,"no8",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=e(C.prototype,"no9",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(C.prototype,"no10",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(C.prototype,"no11",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(C.prototype,"no12",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=e(C.prototype,"panlNode",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(C.prototype,"termStarnode",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=C))||D));s._RF.pop()}}}));

System.register("chunks:///_virtual/newGameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,r,i,o,a,c,s,l,u,p,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,c=e.Node,s=e.Sprite,l=e.tween,u=e.Color,p=e.Vec3,g=e.Component}],execute:function(){var y,h,v,f,w,d;o._RF.push({},"c9830J+Wl9JypsBXeQhF9Rx","newGameManager",void 0);var m=a.ccclass,b=a.property;e("newGameManager",(y=m("newGameManager"),h=b(c),y(((d=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,r(t,"victroyui",w,i(t)),t}n(t,e),t.getInstance=function(){return this.instance};var o=t.prototype;return o.start=function(){t.instance=this},o.showDialog=function(){this.victroyui.active=!0;var e=this.victroyui.getChildByName("bg").getComponent(s);e&&l(e).to(.3,{color:new u(e.color.r,e.color.b,e.color.g,100)},{easing:"fade"}).start();var t=this.victroyui.getChildByName("content");t.scale=new p(0,0),l(t).to(.4,{scale:new p(1,1)},{easing:"backOut"}).call((function(){})).start()},t}(g)).instance=void 0,w=t((f=d).prototype,"victroyui",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=f))||v));o._RF.pop()}}}));

System.register("chunks:///_virtual/pauseui.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,c,n;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,c=e._decorator,n=e.Component}],execute:function(){var a;i._RF.push({},"053b8o6x2xNupJG6SV6fspk","pauseui",void 0);var s=c.ccclass;c.property,e("pauseui",s("pauseui")(a=function(e){function i(){return e.apply(this,arguments)||this}t(i,e);var c=i.prototype;return c.start=function(){},c.hidePauseUI=function(){this.node.active=!1},c.showPauseUI=function(){this.node.active=!0},c.starshowPauseUI=function(e){this.node.active=!0;var t=this.node.children[0];switch(e){case 1:t.children[1].active=!0;break;case 2:t.children[1].active=!0,t.children[3].active=!0;break;case 3:t.children[1].active=!0,t.children[3].active=!0,t.children[5].active=!0}},c.update=function(e){},i}(n))||a);i._RF.pop()}}}));

System.register("chunks:///_virtual/PlaySoundOnClick.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var n,i,t,e,u,r,c,l,a,s;return{setters:[function(o){n=o.applyDecoratedDescriptor,i=o.inheritsLoose,t=o.initializerDefineProperty,e=o.assertThisInitialized},function(o){u=o.cclegacy,r=o._decorator,c=o.AudioClip,l=o.AudioSource,a=o.Button,s=o.Component}],execute:function(){var d,p,h,S,y;u._RF.push({},"ff3029Fio1Hl4FGw13xhymf","PlaySoundOnClick",void 0);var f=r.ccclass,k=r.property;o("PlaySoundOnClick",(d=f("PlaySoundOnClick"),p=k({type:c}),d((y=n((S=function(o){function n(){for(var n,i=arguments.length,u=new Array(i),r=0;r<i;r++)u[r]=arguments[r];return n=o.call.apply(o,[this].concat(u))||this,t(n,"clickSound",y,e(n)),n.audioSource=null,n}i(n,o);var u=n.prototype;return u.start=function(){this.audioSource=this.node.addComponent(l),this.clickSound&&(this.audioSource.clip=this.clickSound);var o=this.node.getComponent(a);o?o.node.on(a.EventType.CLICK,this.playSound,this):console.warn("此节点上没有 Button 组件")},u.playSound=function(){this.audioSource&&this.clickSound?(this.audioSource.volume=.3,this.audioSource.play()):console.warn("音效或 AudioSource 未设置")},n}(s)).prototype,"clickSound",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=S))||h));u._RF.pop()}}}));

System.register("chunks:///_virtual/PopupController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GlobalState.ts"],(function(t){var o,i,e,p,n,u,r,s,a,c,l;return{setters:[function(t){o=t.applyDecoratedDescriptor,i=t.inheritsLoose,e=t.initializerDefineProperty,p=t.assertThisInitialized},function(t){n=t.cclegacy,u=t._decorator,r=t.Node,s=t.Vec3,a=t.tween,c=t.Component},function(t){l=t.GlobalPopupState}],execute:function(){var h,f,P,v,w,d,y,b,g;n._RF.push({},"046aceYCB5L46urQ33eZocj","PopupController",void 0);var m=u.ccclass,A=u.property;t("PopupController",(h=m("PopupController"),f=A(r),P=A(r),v=A(r),h((y=o((d=function(t){function o(){for(var o,i=arguments.length,n=new Array(i),u=0;u<i;u++)n[u]=arguments[u];return o=t.call.apply(t,[this].concat(n))||this,e(o,"popup",y,p(o)),e(o,"showButton",b,p(o)),e(o,"hideButton",g,p(o)),o}i(o,t);var n=o.prototype;return n.start=function(){var t=l.getInstance();this.popup&&(this.popup.active=t.isPopupActive,t.isPopupActive&&this.showPopupAnimation(),this.showButton&&this.showButton.on(r.EventType.TOUCH_END,this.showPopup,this),this.hideButton&&this.hideButton.on(r.EventType.TOUCH_END,this.hidePopup,this))},n.showPopup=function(){this.popup&&(this.popup.active=!0,this.showPopupAnimation(),l.getInstance().isPopupActive=!0)},n.hidePopup=function(){var t=this;this.popup&&this.hidePopupAnimation((function(){t.popup.active=!1,l.getInstance().isPopupActive=!1}))},n.showPopupAnimation=function(){this.popup&&(this.popup.setScale(new s(0,0,1)),a(this.popup).to(.3,{scale:new s(1,1,1)}).start())},n.hidePopupAnimation=function(t){this.popup&&a(this.popup).to(.3,{scale:new s(0,0,1)}).call(t).start()},o}(c)).prototype,"popup",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=o(d.prototype,"showButton",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=o(d.prototype,"hideButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=d))||w));n._RF.pop()}}}));

System.register("chunks:///_virtual/prefab.ts",["cc"],(function(c){var e;return{setters:[function(c){e=c.cclegacy}],execute:function(){e._RF.push({},"c1e9bCxPLZMpIMw+sY28qaF","prefab",void 0);c("default",["/c1","/c2","/c3","/c4"]);e._RF.pop()}}}));

System.register("chunks:///_virtual/PrefabDistributorFromScript_Speed.ts",["./rollupPluginModLoBabelHelpers.js","cc","./cufbParent.ts"],(function(r){var t,e,i,n,o,a,c,s,u,l;return{setters:[function(r){t=r.applyDecoratedDescriptor,e=r.inheritsLoose,i=r.initializerDefineProperty,n=r.assertThisInitialized},function(r){o=r.cclegacy,a=r._decorator,c=r.Node,s=r.instantiate,u=r.Component},function(r){l=r.cufbParent}],execute:function(){var f,p,b,d,h;o._RF.push({},"b721c8GzcZE/KZ5xSu9pTA/","PrefabDistributorFromScript_Speed",void 0);var P=a.ccclass,v=a.property;r("PrefabDistributor",(f=P("PrefabDistributor"),p=v(c),f((h=t((d=function(r){function t(){for(var t,e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return t=r.call.apply(r,[this].concat(o))||this,i(t,"train",h,n(t)),t}e(t,r);var o=t.prototype;return o.start=function(){this.distributePrefabs()},o.distributePrefabs=function(){if(this.train){var r=l.getInstance();if(r)for(var t=[r.c1,r.c2,r.c3,r.c4],e=this.train.children,i=0;i<t.length&&i<e.length;i++){var n=t[i],o=e[i];if(n){var a=s(n);o.addChild(a),a.setPosition(0,0,0)}else console.warn("预制体 "+(i+1)+" 未定义，跳过生成")}else console.error("无法获取 cufbParent 的实例！")}else console.error("train 节点未绑定，请检查！")},t}(u)).prototype,"train",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=d))||b));o._RF.pop()}}}));

System.register("chunks:///_virtual/PrefabDistributorFromScript.ts",["./rollupPluginModLoBabelHelpers.js","cc","./newcurbeParent.ts"],(function(r){var t,e,i,n,o,a,s,c,u,l;return{setters:[function(r){t=r.applyDecoratedDescriptor,e=r.inheritsLoose,i=r.initializerDefineProperty,n=r.assertThisInitialized},function(r){o=r.cclegacy,a=r._decorator,s=r.Node,c=r.instantiate,u=r.Component},function(r){l=r.newcurbeParent}],execute:function(){var f,b,p,h,d;o._RF.push({},"5bb5aOgzy1Ao7Od8hgqXano","PrefabDistributorFromScript",void 0);var P=a.ccclass,v=a.property;r("PrefabDistributor",(f=P("PrefabDistributor"),b=v(s),f((d=t((h=function(r){function t(){for(var t,e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return t=r.call.apply(r,[this].concat(o))||this,i(t,"train",d,n(t)),t}e(t,r);var o=t.prototype;return o.start=function(){this.distributePrefabs()},o.distributePrefabs=function(){if(this.train){var r=l.getInstance();if(r)for(var t=[r.c1,r.c2,r.c3,r.c4],e=this.train.children,i=0;i<t.length&&i<e.length;i++){var n=t[i],o=e[i];if(n){var a=c(n);o.addChild(a),a.setPosition(0,0,0)}else console.warn("预制体 "+(i+1)+" 未定义，跳过生成")}else console.error("无法获取 newcurbeParent 的实例！")}else console.error("train 节点未绑定，请检查！")},t}(u)).prototype,"train",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=h))||p));o._RF.pop()}}}));

System.register("chunks:///_virtual/progress.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,n,t,o,i,a,c,l,s,u,p;return{setters:[function(e){r=e.applyDecoratedDescriptor,n=e.inheritsLoose,t=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){i=e.cclegacy,a=e._decorator,c=e.Node,l=e.Label,s=e.director,u=e.Sprite,p=e.Component}],execute:function(){var f,g,b,d,h,y,m;i._RF.push({},"583e7W2kmRPHpHDpHh/nde4","progress",void 0);var v=a.ccclass,S=a.property;e("progress",(f=v("progress"),g=S(c),b=S(l),f((y=r((h=function(e){function r(){for(var r,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return r=e.call.apply(e,[this].concat(i))||this,t(r,"bar",y,o(r)),t(r,"num",m,o(r)),r}return n(r,e),r.prototype.start=function(){var e=this;s.preloadScene("scene",(function(r,n,t){var o=r/n;e.bar.getComponent(u).fillRange=o,e.num.string=Math.floor(100*o).toString()+"%"}),(function(){console.log("主界面预加载完成"),s.loadScene("scene")}))},r}(p)).prototype,"bar",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=r(h.prototype,"num",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=h))||d));i._RF.pop()}}}));

System.register("chunks:///_virtual/reward.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,t,a,o,n,i,c;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,a=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){n=e.cclegacy,i=e._decorator,c=e.Component}],execute:function(){var p,s,u,l;n._RF.push({},"71331ie4rdCOZwBNp+VoCvU","reward",void 0);var d=i.ccclass,f=i.property,w=e("RewardType",function(e){return e[e.half=0]="half",e[e.random=1]="random",e[e.Two=2]="Two",e[e.pause=3]="pause",e}({}));e("reward",d("reward")((u=r((s=function(e){function r(){for(var r,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return r=e.call.apply(e,[this].concat(n))||this,a(r,"rewardType",u,o(r)),a(r,"rewardpausetime",l,o(r)),r}t(r,e);var n=r.prototype;return n.start=function(){if(this.rewardType===w.random)switch(Math.floor(2*Math.random())){case 0:this.rewardType=w.Two,console.log("积分二倍");break;case 1:this.rewardType=w.pause,console.log("时间暂停")}},n.update=function(e){},r}(c)).prototype,"rewardType",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return w.half}}),l=r(s.prototype,"rewardpausetime",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),p=s))||p);n._RF.pop()}}}));

System.register("chunks:///_virtual/ScoreUI.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,t,n,i,o,c,s,a;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,c=e._decorator,s=e.Label,a=e.Component}],execute:function(){var u,l,p,g,f,b,h,y,v;o._RF.push({},"f0e2bK/WLhFeo1R83kHDSYO","ScoreUI",void 0);var _=c.ccclass,S=c.property;e("ScoreUI",(u=_("ScoreUI"),l=S(s),p=S(s),g=S(s),u((h=r((b=function(e){function r(){for(var r,t=arguments.length,o=new Array(t),c=0;c<t;c++)o[c]=arguments[c];return r=e.call.apply(e,[this].concat(o))||this,n(r,"score",h,i(r)),n(r,"score_setting",y,i(r)),n(r,"score_gameover",v,i(r)),r}t(r,e);var o=r.prototype;return o.start=function(){},o.scoreui=function(e){this.score.string=e.toString(),this.score_setting.string=e.toString(),this.score_gameover.string=e.toString()},o.update=function(e){},r}(a)).prototype,"score",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=r(b.prototype,"score_setting",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=r(b.prototype,"score_gameover",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=b))||f));o._RF.pop()}}}));

System.register("chunks:///_virtual/settings.ts",["cc"],(function(e){var t,l;return{setters:[function(e){t=e.cclegacy,l=e.Vec3}],execute:function(){t._RF.push({},"0de52oI1rxKyqBYAQVgjOtN","settings",void 0);e("settings",[{level:1,size:2,levelsetting:[{round:1,matrix:[[1,1],[1,1]]}],type:[1],levelState:"UNLOCKED",MaxCount:1,MinCount:1,term_num:1,term_onexc:4,levelStar:0,S1:!1,S2:!1,S3:!1,L1:"1步之内完成",L2:"消除完所有动物方块",L3:"一次性消除所有动物方块",pos:new l(-200,0,0),levelLogic:n},{level:2,size:2,levelsetting:[{round:1,matrix:[[3,4],[4,3]]}],type:[null,null,3,4],levelState:"LOCKED",MaxCount:4,MinCount:3,term_num:0,term_onexc:0,levelStar:0,S1:!1,S2:!1,S3:!1,L1:"4步之内完成",L2:"3步之内完成",L3:"消除任意方块",pos:new l(-50,0,0),levelLogic:n},{level:3,size:3,levelsetting:[{round:1,matrix:[[2,3,2],[2,4,1],[1,3,3]]}],type:[2,5,6,7],levelState:"LOCKED",MaxCount:5,MinCount:4,term_num:2,term_onexc:3,levelStar:0,S1:!1,S2:!1,S3:!1,L1:"5步之内完成",L2:"4步之内完成",L3:"完成2次3消除",pos:new l(-50,0,0),levelLogic:n},{level:4,size:4,levelsetting:[{round:1,matrix:[[1,1,2,2],[1,1,2,2],[3,3,4,4],[3,3,4,4]]}],type:[1,5,8,9],levelState:"LOCKED",MaxCount:6,MinCount:4,term_num:4,term_onexc:4,levelStar:0,S1:!1,S2:!1,S3:!1,L1:"6步之内完成",L2:"4步之内完成",L3:"完成4次4消除",pos:new l(-50,0,0),levelLogic:n},{level:5,size:3,levelsetting:[{round:1,matrix:[[2,4,4],[1,3,3],[4,1,3]]}],type:[10,4,8,6],levelState:"LOCKED",MaxCount:6,MinCount:4,term_num:2,term_onexc:3,levelStar:0,S1:!1,S2:!1,S3:!1,L1:"6步之内完成",L2:"4步之内完成",L3:"完成2次3消除",pos:new l(100,0,0),levelLogic:n},{level:6,size:3,levelsetting:[{round:1,matrix:[[3,2,3],[4,1,3],[3,4,2]]}],type:[11,4,12,9],levelState:"LOCKED",MaxCount:6,MinCount:5,term_num:1,term_onexc:4,levelStar:0,S1:!1,S2:!1,S3:!1,L1:"6步之内完成",L2:"5步之内完成",L3:"一次性消除完小羊",pos:new l(250,0,0),levelLogic:n},{level:7,size:4,levelsetting:[{round:1,matrix:[[2,3,3,1],[2,4,1,4],[4,3,2,4],[2,2,1,1]]}],type:[8,10,2,7],levelState:"LOCKED",MaxCount:8,MinCount:6,term_num:1,term_onexc:5,levelStar:0,S1:!1,S2:!1,S3:!1,L1:"8步之内完成",L2:"6步之内完成",L3:"一次性消除完小猫",pos:new l(250,0,0),levelLogic:n},{level:8,size:4,levelsetting:[{round:1,matrix:[[2,2,2,4],[3,1,4,1],[1,4,2,4],[4,3,1,3]]}],type:[4,3,12,5],levelState:"LOCKED",MaxCount:9,MinCount:6,term_num:2,term_onexc:4,levelStar:0,S1:!1,S2:!1,S3:!1,L1:"9步之内完成",L2:"6步之内完成",L3:"完成2次4消除",pos:new l(250,0,0),levelLogic:n},{level:9,size:5,levelsetting:[{round:1,matrix:[[1,4,4,4,2],[1,3,3,4,2],[1,2,4,4,3],[1,3,4,3,4],[4,4,1,1,4]]}],type:[1,10,8,7],levelState:"LOCKED",MaxCount:8,MinCount:6,term_num:1,term_onexc:7,levelStar:0,S1:!1,S2:!1,S3:!1,L1:"8步之内完成",L2:"6步之内完成",L3:"一次性消除7个或以上的小猪",pos:new l(250,0,0),levelLogic:n},{level:10,size:4,levelsetting:[{round:1,matrix:[[1,4,1,4],[3,3,1,1],[1,4,3,2],[4,3,2,4]]},{round:2,matrix:[[4,4,3,3],[1,3,4,2],[4,1,4,1],[1,3,2,4]]}],type:[3,8,6,9],levelState:"LOCKED",MaxCount:17,MinCount:12,term_num:2,term_onexc:4,levelStar:0,S1:!1,S2:!1,S3:!1,L1:"17步之内完成",L2:"12步之内完成",L3:"每轮完成2次4消除",pos:new l(250,0,0),levelLogic:n}]);function n(){console.log("Running level 1 logic")}t._RF.pop()}}}));

System.register("chunks:///_virtual/skin.ts",["cc"],(function(e){var r;return{setters:[function(e){r=e.cclegacy}],execute:function(){r._RF.push({},"1fd1dLPSFFPAKQtLAfjp8o1","skin",void 0);e("default",["/square_g/spriteFrame","/square_b/spriteFrame","/square_y/spriteFrame","/square_r/spriteFrame","/5/spriteFrame","/6/spriteFrame","/7/spriteFrame","/8/spriteFrame"]);r._RF.pop()}}}));

System.register("chunks:///_virtual/StartUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./all.ts"],(function(e){var t,n,a,o,i,r,s,l,c,d,u,p,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){i=e.cclegacy,r=e._decorator,s=e.Prefab,l=e.instantiate,c=e.Vec3,d=e.tween,u=e.director,p=e.Component},function(e){f=e.All}],execute:function(){var h,b,g,y,S,v,m,w;i._RF.push({},"1e297oouE1PK4byLdQo5y3O","StartUI",void 0);var C=r.ccclass,I=r.property;e("StartUI",(h=C("StartUI"),b=I(s),g=I(s),h(((w=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).pausednode=null,a(t,"pausePrefab",v,o(t)),a(t,"loadprefab",m,o(t)),t.loadnode=null,t}n(t,e),t.getInstance=function(){return this.instance};var i=t.prototype;return i.start=function(){t.instance=this},i.showspeeddialog=function(){this.pausednode=l(this.pausePrefab),this.node.addChild(this.pausednode);var e=this.pausednode.getChildByName("content");e.scale=new c(0,0,0),d(e).to(.4,{scale:new c(1,1,1)},{easing:"backOut"}).call((function(){})).start()},i.hidespeeddialog=function(){var e=this,t=this.pausednode.getChildByName("content");d(t).to(.4,{scale:new c(0,0,0)},{easing:"backIn"}).call((function(){e.pausednode.destroy(),f.setStateDialog(!1)})).start()},i.OnStartButtonClick=function(){console.log("触发了开始游戏"),this.loadnode=l(this.loadprefab),this.node.addChild(this.loadnode),setTimeout((function(){u.loadScene("sceneSpeed",(function(){}))}),500)},i.OnSecondStartButtonClick=function(){this.loadnode=l(this.loadprefab),this.node.addChild(this.loadnode),setTimeout((function(){u.loadScene("Map",(function(){}))}),500)},i.update=function(e){},t}(p)).instance=void 0,v=t((S=w).prototype,"pausePrefab",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=t(S.prototype,"loadprefab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=S))||y));i._RF.pop()}}}));

System.register("chunks:///_virtual/teach.ts",["./rollupPluginModLoBabelHelpers.js","cc","./skin.ts","./prefab.ts","./Audio.ts"],(function(t){var e,r,n,o,i,a,s,l,u,c,f,h,d,p,g,v,b,y,m,w,S;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,i=t.createForOfIteratorHelperLoose},function(t){a=t.cclegacy,s=t._decorator,l=t.Prefab,u=t.tween,c=t.Vec3,f=t.resources,h=t.instantiate,d=t.SpriteFrame,p=t.Sprite,g=t.input,v=t.Input,b=t.find,y=t.Component},function(t){m=t.default},function(t){w=t.default},function(t){S=t.Audio}],execute:function(){var M,A,T,x,z,k,P,_,R,D,N,C,E,F,L,O,I,B,H;a._RF.push({},"fb78b0r9jtKEa0ayZthk2mp","teach",void 0);var Z=s.ccclass,j=s.property;t("cufbParent",(M=Z("teach"),A=j(l),T=j(l),x=j(l),z=j(l),k=j(l),P=j(l),_=j(S),M(((H=function(t){function e(){for(var e,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))||this).currentRound=void 0,n(e,"blockSize",N,o(e)),n(e,"c1",C,o(e)),n(e,"c2",E,o(e)),n(e,"c3",F,o(e)),n(e,"c4",L,o(e)),e.tileMatrix=[],e.colorArray=[],e.isMoving=!1,e.size=void 0,e.rotateState=!1,e.movesysmol=void 0,e.state_button=!0,e.cstate=!1,e.dstate=!1,e.indexArray=[],e.posArray=[],e.pArray=[],e.titleMatrix_pos=[],e.rewardNode=null,e.reward_time=!1,n(e,"reward1",O,o(e)),n(e,"reward2",I,o(e)),e.spriteFramePath=m,e.prefabPaths=w,e.len=null,n(e,"audio",B,o(e)),e.animatedNodes=new Set,e.ybnum=0,e.ybState=!1,e.touchStartPos=void 0,e.currentTween=null,e}r(e,t),e.getInstance=function(){return this.instance};var a=e.prototype;return a.start=function(){},a.moveNode=function(t,e,r,n){var o=this;if(!this.animatedNodes.has(t)){this.isMoving=!0;t.getWorldPosition();u(t).to(.5,{worldPosition:e}).call((function(){o.isMoving=!1,o.colorArray[r][n]=null,o.cstate=!1,console.log("1111"),o.animatedNodes.add(t)})).start(),this.cstate=!0}},a.updaterotate=function(){for(var t,e=this.node.children,r=i(e);!(t=r()).done;){var n=t.value;n.eulerAngles=c.ZERO,n.destroy()}this.node.eulerAngles=c.ZERO},a.loadMultiplePrefabsAndSpriteFrames=function(t,e,r,n,o){var i=this,a=this.prefabPaths[t];console.log(a+"path"),console.log(n),console.log(o),f.load(a,l,(function(a,s){if(a)console.error(a);else{var l=h(s);l.setParent(i.node);var u=new c(o*i.blockSize-r/2*50+25,n*i.blockSize-r/2*50+25,0);l.setPosition(u),i.tileMatrix[n][o]=l,i.colorArray[n][o]=t,i.titleMatrix_pos[n][o]=u,f.load(i.spriteFramePath[t+4*e],d,(function(t,e){if(t)console.error(t);else{var r=l.getComponent(p);r?r.spriteFrame=e:console.error("Sprite component not found on the prefab node!")}})),i.ybnum+=1,i.ybnum/r===r&&(i.ybState=!0,i.ybnum=0)}}))},a.onLoad=function(){g.on(v.EventType.TOUCH_START,this.onTouchStart,this),g.on(v.EventType.TOUCH_END,this.onTouchEnd,this)},a.onTouchStart=function(t){console.log("点击"),this.touchStartPos=t.getLocation()},a.onTouchEnd=function(t){console.log("松开");var e=t.getLocation(),r=this.getSwipeDirection(this.touchStartPos,e);this.handleSwipe(r)},a.getSwipeDirection=function(t,e){var r=e.x-t.x,n=e.y-t.y;if(Math.abs(r)>Math.abs(n)){if(r>0)return"right";if(r<0)return"left"}else{if(n>0)return"up";if(n<0)return"down"}return"none"},a.handleSwipe=function(t){switch(t){case"up":if(console.log("up"),this.isMoving)return;this.markToRemove("u");break;case"down":if(this.isMoving)return;console.log("Swipe Down"),this.markToRemove("d");break;case"left":if(this.isMoving)return;console.log("Swipe Left"),this.markToRemove("l");break;case"right":if(this.isMoving)return;console.log("Swipe Right"),this.markToRemove("r")}},a.markToRemove=function(t){for(var e=this.size,r="r"===t||"l"===t,n="r"===t||"u"===t,o=function(t,e){return t===e||null===t||4===t},i=Array.from({length:e},(function(){return Array(e).fill(!1)})),a="r"===t||"u"===t?e-1:0,s="r"===t||"u"===t?0:e-1,l=0;l<e;l++)for(var u=0,c=a;n?c>=s:c<=s;n?c--:c++){if(!o(this.colorArray[r?l:c][r?c:l],this.getTargetColor(t))){if(u>0){for(var f=c+(n?1:-1);n?f<=c+u:f>=c-u;n?f++:f--)r?i[l][f]=!0:i[f][l]=!0;u=0}break}if(++u>0&&c===s)for(var h=c;n?h<c+u:h>c-u;n?h++:h--)r?i[l][h]=!0:i[h][l]=!0}this.moveNodes(i,e,t)},a.getTargetColor=function(t){switch(t){case"r":return 1;case"l":return 3;case"d":return 0;case"u":return 2}},a.moveNodes=function(t,e,r){for(var n=this,o=0;o<e;o++)for(var i=function(){if(!0===t[o][a]){var e=n.getTileAt(o,a),i=e.getWorldPosition(),s=function(t){switch(t){case"r":return new c(i.x+500,i.y,i.z);case"l":return new c(i.x-500,i.y,i.z);case"d":return new c(i.x,i.y-500,i.z);case"u":return new c(i.x,i.y+500,i.z)}}(r);n.moveNode(e,s,o,a)}},a=0;a<e;a++)i()},a.changeBState=function(){this.state_button=!0},a.getTileAt=function(t,e){return this.tileMatrix[t][e]},a.onrotateButton=function(){var t=this;if(b("GameManager/audio").getComponent(S).playClick(),this.state_button){var e=this.node.angle-90;this.rotateState=!0;for(var r,n=u(this.node).to(1,{angle:e},{easing:"quadInOut"}).call((function(){t.rotateState=!1,t.changeBState()})),o=this.node.children,a=i(o);!(r=a()).done;){var s=r.value,l=s.angle+90;u(s).to(1,{angle:l},{easing:"quadInOut"}).start()}n.start(),this.state_button=!1,this.currentTween=n,this.tileMatrix=this.rotateMatrix90Degrees(this.tileMatrix),this.colorArray=this.rotateMatrix90Degrees(this.colorArray),this.titleMatrix_pos=this.rotateMatrix90Degrees(this.titleMatrix_pos)}},a.rotateMatrix90Degrees=function(t){for(var e=t.length,r=Array.from({length:e},(function(){return Array(e).fill(null)})),n=0;n<e;n++)for(var o=0;o<e;o++)r[e-1-o][n]=t[n][o];return r},a.update=function(t){},e}(y)).instance=void 0,N=e((D=H).prototype,"blockSize",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),C=e(D.prototype,"c1",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(D.prototype,"c2",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(D.prototype,"c3",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(D.prototype,"c4",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(D.prototype,"reward1",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(D.prototype,"reward2",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(D.prototype,"audio",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=D))||R));a._RF.pop()}}}));

System.register("chunks:///_virtual/TimeUI.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,e,n,r,o,a,c,l,u;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,c=t.Label,l=t.Animation,u=t.Component}],execute:function(){var s,p,f,m,y,b,g;o._RF.push({},"d30f2Mi2wlOEJ3uqrcalVDS","TimeUI",void 0);var h=a.ccclass,d=a.property;t("TimeUI",(s=h("TimeUI"),p=d(c),f=d(l),s((b=i((y=function(t){function i(){for(var i,e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return i=t.call.apply(t,[this].concat(o))||this,n(i,"time",b,r(i)),n(i,"animation",g,r(i)),i}e(i,t);var o=i.prototype;return o.start=function(){},o.TimeUI=function(t){this.time.string=t.toString()+"s"},o.update=function(t){},i}(u)).prototype,"time",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=i(y.prototype,"animation",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=y))||m));o._RF.pop()}}}));

System.register("chunks:///_virtual/top.ts",["./rollupPluginModLoBabelHelpers.js","cc","./skin.ts"],(function(t){var e,n,o,r,i,a,s,p,c,u,l,f;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,r=t.Node,i=t.Layers,a=t.Vec3,s=t.Sprite,p=t.resources,c=t.SpriteFrame,u=t.UITransform,l=t.Component},function(t){f=t.default}],execute:function(){var d;n._RF.push({},"f67eaW8c6JBX79rHZ5i5/S6","top",void 0);var m=o.ccclass;o.property,t("top",m("top")(d=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this).top=null,e.skintype=0,e.spriteFramePath=f,e}e(n,t);var o=n.prototype;return o.start=function(){var t=this;this.top=this.node.getChildByName("top-mid");for(var e=function(){var e=new r("animal"+n);e.layer=i.Enum.UI_2D,t.top.addChild(e);var o=new a(178*n-267,-17,0);e.setPosition(o.x,o.y,o.z),e.addComponent(s),p.load(t.spriteFramePath[n+4*t.skintype],c,(function(t,n){t?console.error(t):(e.getComponent(s).spriteFrame=n,e.getComponent(u).setContentSize(170,170))}))},n=0;n<4;n++)e()},o.update=function(t){},n}(l))||d);n._RF.pop()}}}));

System.register("chunks:///_virtual/tx_col.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,n,o,i,a,s,c,l,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){i=e.cclegacy,a=e._decorator,s=e.Prefab,c=e.instantiate,l=e.Animation,u=e.Component}],execute:function(){var p,f,b,d,h;i._RF.push({},"627bbl79zVLI5REWNFdXq1u","tx_col",void 0);var y=a.ccclass,v=a.property;e("tx_col",(p=y("tx_col"),f=v([s]),p((h=t((d=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,n(t,"prefabs",h,o(t)),t}r(t,e);var i=t.prototype;return i.txcreator=function(e,t){if(e<1||e>this.prefabs.length)console.error("Prefab kind is out of range. It should be between 1 and "+this.prefabs.length);else{var r=this.prefabs[e-1];if(r){var n=c(r);n.setParent(this.node),n.setWorldPosition(t),n.getComponent(l).on(l.EventType.FINISHED,(function(){n.destroy()}),this)}else console.error("Prefab at index "+(e-1)+" is undefined.")}},i.update=function(e){},t}(u)).prototype,"prefabs",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=d))||b));i._RF.pop()}}}));

System.register("chunks:///_virtual/UIController.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,r,s,a,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.Node,u=t.Component}],execute:function(){var h,l,c,d,p,f,g,y,N;r._RF.push({},"2fad2yi55hL3LJ5aufcy3tw","UIController",void 0);var T=s.ccclass,w=s.property;t("UIController",(h=T("UIController"),l=w(a),c=w(a),d=w(a),h((g=e((f=function(t){function e(){for(var e,o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,i(e,"targetNode",g,n(e)),i(e,"showButton",y,n(e)),i(e,"hideButton",N,n(e)),e}o(e,t);var r=e.prototype;return r.start=function(){this.showButton&&this.showButton.on(a.EventType.TOUCH_END,this.showTargetNode,this),this.hideButton&&this.hideButton.on(a.EventType.TOUCH_END,this.hideTargetNode,this)},r.showTargetNode=function(){this.targetNode&&(this.targetNode.active=!0)},r.hideTargetNode=function(){this.targetNode&&(this.targetNode.active=!1)},r.onDestroy=function(){this.showButton&&this.showButton.off(a.EventType.TOUCH_END,this.showTargetNode,this),this.hideButton&&this.hideButton.off(a.EventType.TOUCH_END,this.hideTargetNode,this)},e}(u)).prototype,"targetNode",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=e(f.prototype,"showButton",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(f.prototype,"hideButton",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=f))||p));r._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});
//# sourceMappingURL=index.js.map